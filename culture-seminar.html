<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Culture Seminar — Podcast</title>
  <style>
    :root{
      --bg-dark:#0b0b0c;
      --accent:#ff7a18;
      --muted:#9aa4ad;
      --glass: rgba(255,255,255,0.06);
      --glass-2: rgba(255,255,255,0.03);
    }
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e6eef3;background:var(--bg-dark);-webkit-font-smoothing:antialiased;}
    .stage{
      position:relative;
      min-height:100vh;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:48px;
      box-sizing:border-box;
    }

    /* Parallax background layers */
    .parallax{
      position:absolute;
      inset:0;
      pointer-events:none;
      overflow:visible;
      transform-style:preserve-3d;
    }
    .layer{
      position:absolute;
      top:50%;
      left:50%;
      width:110%;
      height:110%;
      background-position:center;
      background-size:cover;
      transform-origin:center;
      will-change:transform;
      filter:brightness(0.9) saturate(0.95);
      transition:transform 0.1s linear;
      mix-blend-mode:normal;
    }
    .layer--back{
      z-index:0;
      opacity:0.9;
      transform:translate(-50%,-50%) translateZ(-30px) scale(1.06);
      /* Use the band photo as the main background */
      background-image: url("img/african-night-band.jpeg");
      clip-path: none;
      filter: blur(1px) brightness(.88) contrast(0.98);
    }
    .layer--mid{
      z-index:1;
      opacity:0.95;
      transform:translate(-50%,-50%) translateZ(-15px) scale(1.03);
      /* subtle neutral mid-layer to avoid duplicating the small photos */
      background-image: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.12));
      clip-path: ellipse(75% 70% at 50% 55%);
      filter: brightness(.92) saturate(.95);
    }
    .layer--front{
      z-index:2;
      opacity:0.95;
      transform:translate(-50%,-50%) translateZ(0px) scale(1);
      /* foreground is a soft dark vignette/gradient to improve contrast */
      background-image: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.14));
      clip-path: none;
      filter: none;
    }

    /* Small 'taped' photos that sit above the background */
    .photo{
      position:absolute;
      width:320px;
      height:230px;
      background-position:center;
      background-size:cover;
      border-radius:6px;
      box-shadow: 0 12px 30px rgba(2,6,23,0.6);
      border:6px solid rgba(255,255,255,0.85);
      transform-origin:center;
      z-index:3;
      transition:box-shadow .18s ease, transform .12s ease;
      will-change:transform;
      pointer-events:auto;
    }
    .photo::after{
      /* little tape strip */
      content: '';
      position:absolute;
      left:50%;
      top:-12px;
      transform:translateX(-50%) rotate(-6deg);
      width:70%;
      height:20px;
      background: linear-gradient(90deg, rgba(255,255,255,0.88), rgba(255,255,255,0.76));
      border-radius:2px;
      opacity:.85;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
      filter: blur(.2px);
    }
    .photo--band{ left:18%; top:26%; background-image: url("img/african-night-group.jpeg"); }
    .photo--pub{ right:8%; top:18%; background-image: url("img/irish-pub-karaoke.jpeg"); width:300px; height:210px; }
    /* smaller on mobile */
    @media (max-width:720px){
      .photo{ display:none; }
    }

    /* Main UI card */
    .card{
      position:relative;
      z-index:5;
      width:900px;
      max-width:calc(100% - 64px);
      backdrop-filter: blur(8px) saturate(1.1);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.04);
      padding:28px;
      box-shadow: 0 10px 40px rgba(2,6,23,0.6);
      display:flex;
      gap:20px;
      align-items:center;
    }
    .meta{
      flex:1;
      min-width:0;
    }
    h1{
      margin:0 0 6px 0;
      font-size:20px;
      letter-spacing:0.2px;
      color:#fff;
    }
    p.lead{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.4;
    }

    /* Player controls */
    .player{
      display:flex;
      gap:16px;
      align-items:center;
    }
    .play-btn{
      --size:78px;
      width:var(--size);
      height:var(--size);
      background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border-radius:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 6px 24px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.04);
      cursor:pointer;
      transition:transform .16s cubic-bezier(.2,.9,.2,1), box-shadow .16s;
      position:relative;
      flex-shrink:0;
    }
    .play-btn:active{ transform: translateY(2px) scale(.995); }
    .play-icon, .pause-icon{
      width:34px;
      height:34px;
      display:block;
    }
    /* Play triangle */
    .play-icon svg{ display:block; width:100%; height:100%; filter: drop-shadow(0 6px 20px rgba(0,0,0,0.6)); }
    /* Pause bars */
    .pause-icon{
      display:none;
      width:28px;
      height:28px;
      gap:6px;
      align-items:center;
      justify-content:center;
      display:flex;
    }
    .pause-icon span{
      width:6px;
      height:100%;
      border-radius:3px;
      background:linear-gradient(180deg, var(--accent), #ffb47a);
      box-shadow: 0 2px 8px rgba(0,0,0,0.6);
    }

    .playing .play-icon{ display:none; }
    .playing .pause-icon{ display:flex; }

    /* Progress and sliders */
    .controls{
      flex:1;
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .progress-row{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .time{
      color:var(--muted);
      font-size:13px;
      width:64px;
      text-align:center;
      flex-shrink:0;
    }
    input[type="range"]{
      -webkit-appearance:none;
      appearance:none;
      height:10px;
      background:transparent;
      width:100%;
    }
    input[type="range"]::-webkit-slider-runnable-track{
      height:10px;
      background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04));
      border-radius:999px;
    }
    input[type="range"]::-moz-range-track{
      height:10px;
      background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04));
      border-radius:999px;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      width:18px;height:18px;border-radius:50%;
      background:linear-gradient(180deg,var(--accent),#ffb47a);
      border:3px solid rgba(255,255,255,0.08);
      margin-top:-4px;
      box-shadow:0 6px 20px rgba(0,0,0,0.6);
    }
    .progress-wrap{
      display:flex;
      align-items:center;
      gap:12px;
      width:100%;
      min-width:0;
    }
    .meta-actions{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .btn{
      padding:8px 12px;
      background:var(--glass);
      border-radius:10px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.03);
      cursor:pointer;
      font-size:13px;
    }

    /* Responsive */
    @media (max-width:720px){
      .card{ flex-direction:column; align-items:stretch; padding:18px; gap:14px;}
      .player{ width:100%; justify-content:space-between; }
      .play-btn{ --size:64px; }
    }
  </style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="parallax" id="parallax">
      <div class="layer layer--back" data-depth="0.06"></div>
      <div class="layer layer--mid" data-depth="0.12"></div>
      <div class="layer layer--front" data-depth="0.18"></div>
      <!-- taped small photos (appear above background, below the card) -->
      <div class="photo photo--band" data-depth="0.28" data-rot="-8"></div>
      <div class="photo photo--pub" data-depth="0.38" data-rot="6"></div>
    </div>

    <div class="card" role="region" aria-label="Podcast player for Culture Seminar">
      <div class="player">
        <button class="play-btn" id="playBtn" aria-pressed="false" aria-label="Play podcast">
          <div class="play-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" fill="none">
              <defs>
                <linearGradient id="g" x1="0" x2="1">
                  <stop offset="0" stop-color="#ffb47a"/>
                  <stop offset="1" stop-color="#ff7a18"/>
                </linearGradient>
              </defs>
              <circle cx="32" cy="32" r="30" fill="url(#g)" opacity="0.08"></circle>
              <path d="M26 20 L46 32 L26 44 Z" fill="url(#g)"></path>
            </svg>
          </div>
          <div class="pause-icon" aria-hidden="true">
            <span></span><span></span>
          </div>
        </button>

        <div class="controls" id="controls">
          <div class="meta">
            <h1>Cultural Harmony — Echoes of the Earth</h1>
            <p class="lead">Your podcast exploring cross-cultural music. Beishen, Sathvik, and Timon invite you to a journey through diverse musical landscapes and stories.</p>
          </div>

          <div class="progress-row">
            <div class="time" id="current">0:00</div>
            <div class="progress-wrap" style="align-items:center;">
              <input type="range" id="seek" min="0" max="100" value="0" step="0.1" aria-label="Seek">
            </div>
            <div class="time" id="duration">0:00</div>
          </div>
        </div>
      </div>

      <div class="meta-actions" aria-hidden="false">
        <button class="btn" id="downloadBtn">Download</button>
        <button class="btn" id="bookmarkBtn">Bookmark</button>
      </div>
    </div>

    <!-- Hidden native audio element -->
    <audio id="podcast" preload="metadata" src="audio/podcast.mp3"></audio>
  </div>

  <script>
    (function () {
      const audio = document.getElementById('podcast');
      const playBtn = document.getElementById('playBtn');
      const seek = document.getElementById('seek');
      const currentEl = document.getElementById('current');
      const durationEl = document.getElementById('duration');
      const downloadBtn = document.getElementById('downloadBtn');
      const bookmarkBtn = document.getElementById('bookmarkBtn');
      const card = document.querySelector('.card');

      // Utility: format seconds to M:SS
      function fmt(s){
        if (!isFinite(s)) return '0:00';
        s = Math.max(0, Math.floor(s));
        const m = Math.floor(s / 60);
        const sec = s % 60;
        return m + ':' + (sec < 10 ? '0' + sec : sec);
      }

      // Play/Pause toggle
      playBtn.addEventListener('click', () => {
        if (audio.paused) audio.play();
        else audio.pause();
      });

      // Update UI when playing/paused
      audio.addEventListener('play', () => {
        playBtn.classList.add('playing');
        playBtn.setAttribute('aria-pressed', 'true');
        playBtn.setAttribute('aria-label', 'Pause podcast');
      });
      audio.addEventListener('pause', () => {
        playBtn.classList.remove('playing');
        playBtn.setAttribute('aria-pressed', 'false');
        playBtn.setAttribute('aria-label', 'Play podcast');
      });

      // When metadata loaded, set duration
      audio.addEventListener('loadedmetadata', () => {
        seek.max = audio.duration;
        durationEl.textContent = fmt(audio.duration);
      });

      // Timeupdate -> seek value and current time
      audio.addEventListener('timeupdate', () => {
        if (!seek.dragging) seek.value = audio.currentTime;
        currentEl.textContent = fmt(audio.currentTime);
      });

      // Seek input interactions
      seek.addEventListener('input', () => {
        currentEl.textContent = fmt(seek.value);
      });
      // mark dragging to avoid conflicts with timeupdate
      seek.addEventListener('mousedown', () => (seek.dragging = true));
      seek.addEventListener('touchstart', () => (seek.dragging = true));
      document.addEventListener('mouseup', () => {
        if (seek.dragging) {
          audio.currentTime = seek.value;
          seek.dragging = false;
        }
      });
      document.addEventListener('touchend', () => {
        if (seek.dragging) {
          audio.currentTime = seek.value;
          seek.dragging = false;
        }
      });
      // keyboard seek support
      seek.addEventListener('change', () => {
        audio.currentTime = seek.value;
      });

      // Download button links to file in audio dir
      downloadBtn.addEventListener('click', () => {
        const a = document.createElement('a');
        a.href = audio.currentSrc || audio.src || 'audio/podcast.mp3';
        a.download = '';
        document.body.appendChild(a);
        a.click();
        a.remove();
      });

      // Bookmark example: store time in localStorage
      bookmarkBtn.addEventListener('click', () => {
        const key = 'cultureSeminar-bookmark';
        const time = Math.floor(audio.currentTime || 0);
        localStorage.setItem(key, time);
        bookmarkBtn.textContent = 'Bookmarked';
        setTimeout(()=> bookmarkBtn.textContent = 'Bookmark', 1600);
      });
      // restore bookmark on load if present
      window.addEventListener('load', () => {
        const key = 'cultureSeminar-bookmark';
        const bm = localStorage.getItem(key);
        if (bm) {
          // Show small hint by briefly flashing card border
          card.animate([{boxShadow: '0 0 0 rgba(0,0,0,0)'},{boxShadow:'0 0 8px rgba(255,122,24,0.12)'},{boxShadow:'0 0 0 rgba(0,0,0,0)'}],{duration:1200});
        }
      });

      // Parallax mouse movement (smoothed, lower intensity)
      const parallax = document.getElementById('parallax');
      const layers = Array.from(parallax.querySelectorAll('.layer'));
      const photos = Array.from(parallax.querySelectorAll('.photo'));
      let stage = document.getElementById('stage');
      let bounds = stage.getBoundingClientRect();

      function updateBounds(){ bounds = stage.getBoundingClientRect(); }
      window.addEventListener('resize', updateBounds);

      // target is where the pointer is; current is smoothed toward target
      const target = {x:0,y:0};
      const current = {x:0,y:0};
      const lerp = (a,b,t) => a + (b - a) * t;

      function onMove(e){
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        // normalize to -0.5 .. 0.5
        target.x = ((clientX - bounds.left) / Math.max(1, bounds.width)) - 0.5;
        target.y = ((clientY - bounds.top) / Math.max(1, bounds.height)) - 0.5;
      }

      window.addEventListener('mousemove', onMove, {passive:true});
      window.addEventListener('touchmove', onMove, {passive:true});

      // animation loop with smoothing for a gentler effect
      function animateParallax(){
          // ease current toward target (faster so photos respond more promptly)
          current.x = lerp(current.x, target.x, 0.14);
          current.y = lerp(current.y, target.y, 0.14);

        // limit intensity on small screens
        const maxBase = (bounds.width < 520) ? 6 : 20;

        layers.forEach(layer => {
          const depth = Math.max(0, parseFloat(layer.dataset.depth) || 0.08);
          const tx = current.x * depth * maxBase;
          const ty = current.y * depth * (maxBase * 0.75);
          const scale = 1 + depth * 0.01; // tiny scale uplift
          layer.style.transform = `translate(-50%,-50%) translate3d(${tx}px,${ty}px,0) scale(${scale})`;
        });

        // stronger mouse-follow for the taped photos — larger translate/rotation/scale
        photos.forEach(photo => {
          // increase effective depth so photos move more than before
          const depth = Math.max(0, parseFloat(photo.dataset.depth) || 0.35);
          const baseRot = parseFloat(photo.dataset.rot) || 0;
          // larger translation multipliers for more visible movement
          const tx = current.x * depth * (maxBase * 2.0);
          const ty = current.y * depth * (maxBase * 1.3);
          // stronger rotation response
          const rotAdd = current.x * depth * 14;
          // slightly larger scale change on movement
          const scale = 1 + depth * 0.04;
          photo.style.transform = `translate(-50%,-50%) translate3d(${tx}px,${ty}px,0) rotate(${baseRot + rotAdd}deg) scale(${scale})`;
          // subtle shadow lift while pointer is away from center
          const shadowLift = Math.min(18, Math.abs(current.x + current.y) * 60);
          photo.style.boxShadow = `0 ${12 + shadowLift}px ${30 + shadowLift}px rgba(2,6,23,0.6)`;
        });

        requestAnimationFrame(animateParallax);
      }
      requestAnimationFrame(animateParallax);

      // Accessibility: space/enter toggles play when playBtn focused
      playBtn.addEventListener('keydown', (e) => {
        if (e.key === ' ' || e.key === 'Enter') {
          e.preventDefault();
          playBtn.click();
        }
      });

      // If audio file not available, show disabled state
      audio.addEventListener('error', () => {
        playBtn.disabled = true;
        playBtn.style.opacity = .6;
        const err = document.createElement('div');
        err.style.color = 'var(--muted)';
        err.style.fontSize = '13px';
        err.style.marginTop = '10px';
        err.textContent = 'Audio not found in audio/podcast.mp3';
        card.appendChild(err);
      });

    })();
  </script>
</body>
</html>